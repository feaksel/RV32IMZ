# Innovus Macro Placement File for Full SoC
#
# This file defines the locations of SRAM macros for the `soc_simple` design.
# To use this, source the file in place_route.tcl during floorplanning.
#
# The strategy is to place the memory instances on the periphery,
# leaving the center of the core area for standard cell logic.
#
# NOTE: These coordinates are estimates. You will likely need to adjust them
# based on your final floorplan size and aspect ratio. The dimensions
# of the sky130_sram_2kbyte_1rw1r_32x512_8 macro are approximately 115um x 385um.

# === ROM Banks (Bootloader and Application) ===
# Place dual ROM instances on the left side  
placeInstance soc_simple/dual_rom_inst/* 10 10 N

# === RAM Banks (System Memory) ===  
# Place 64KB RAM instance on the right side
placeInstance soc_simple/ram_64kb_inst/* 800 10 N

# === ROM Banks (Bootloader and Application) ===
# Place dual ROM instances on the left side  
placeInstance soc_simple/dual_rom_inst/* 10 10 N

# === RAM Banks (System Memory) ===  
# Place 64KB RAM instance on the right side
placeInstance soc_simple/ram_64kb_inst/* 800 10 N

# === Peripheral Memory (if using SRAM macros) ===
# Place any peripheral memory macros in remaining space
# placeInstance soc_simple/uart_buffer/* 500 400 N
# placeInstance soc_simple/pwm_memory/* 650 400 N

# Note: Actual instance names depend on your RTL hierarchy
# Use 'report_instances' in Innovus to see the actual instance names
placeInstance soc_top.ram_bank_29.*  130 5080 N
placeInstance soc_top.ram_bank_30.*  130 5470 N
placeInstance soc_top.ram_bank_31.*  130 5860 N

# === ROM Banks (Right Side) ===
# 16 ROM macros, placed in a single column on the far right.
# Assumes a total chip width of ~1500um. Adjust X-coordinate as needed.
set rom_x_offset 1300

# --- ROM Column ---
placeInstance soc_top.rom_bank_0.*   $rom_x_offset 10 N
placeInstance soc_top.rom_bank_1.*   $rom_x_offset 400 N
placeInstance soc_top.rom_bank_2.*   $rom_x_offset 790 N
placeInstance soc_top.rom_bank_3.*   $rom_x_offset 1180 N
placeInstance soc_top.rom_bank_4.*   $rom_x_offset 1570 N
placeInstance soc_top.rom_bank_5.*   $rom_x_offset 1960 N
placeInstance soc_top.rom_bank_6.*   $rom_x_offset 2350 N
placeInstance soc_top.rom_bank_7.*   $rom_x_offset 2740 N
placeInstance soc_top.rom_bank_8.*   $rom_x_offset 3130 N
placeInstance soc_top.rom_bank_9.*   $rom_x_offset 3520 N
placeInstance soc_top.rom_bank_10.*  $rom_x_offset 3910 N
placeInstance soc_top.rom_bank_11.*  $rom_x_offset 4300 N
placeInstance soc_top.rom_bank_12.*  $rom_x_offset 4690 N
placeInstance soc_top.rom_bank_13.*  $rom_x_offset 5080 N
placeInstance soc_top.rom_bank_14.*  $rom_x_offset 5470 N
placeInstance soc_top.rom_bank_15.*  $rom_x_offset 5860 N

puts "INFO: Macro placement configuration loaded."
